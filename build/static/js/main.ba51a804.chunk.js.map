{"version":3,"sources":["services/people.js","App.js","index.js"],"names":["baseUrl","peopleService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteContact","delete","console","log","Notification","message","notificationType","className","Filter","inputControlState","changeHandler","value","onChange","PersonForm","submitHandler","onSubmit","type","People","people","peopleState","handleDeleteContact","peopleToShow","filter","person","name","toLowerCase","includes","map","number","contactName","DeleteContact","onClick","App","useState","setPeople","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notificationMessage","setNotificationMessage","setNotificationType","useEffect","initialPeople","e","target","preventDefault","existingPerson","find","o","sameNamePerson","alert","window","confirm","updatedPerson","setTimeout","catch","error","status","contactObject","date","Date","toISOString","returnedContact","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ba51a804.chunk.js","sourcesContent":["/* eslint-disable no-console */\nimport axios from 'axios';\n\nconst baseUrl = '/api/people';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => axios.put(`${baseUrl}/${id}`, newObject);\n\nconst deleteContact = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => console.log('contact deleted', response));\n};\n\nconst peopleService = {\n  getAll, create, update, deleteContact,\n};\n\nexport default peopleService;\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable react/prop-types */\n/* eslint-disable no-console */\n/* eslint-disable no-alert */\nimport React, { useState, useEffect } from 'react';\nimport peopleService from './services/people';\n\nconst Notification = ({ message, notificationType }) => {\n  if (message === null) {\n    return null;\n  }\n\n  if (notificationType === 'success') {\n    return <div className=\"success\">{message}</div>;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nconst Filter = ({ inputControlState, changeHandler }) => (\n  <div>\n    filter shown with:\n    {' '}\n    <input value={inputControlState} onChange={changeHandler} />\n  </div>\n);\n\nconst PersonForm = ({ submitHandler, inputControlState, changeHandler }) => (\n  <form onSubmit={submitHandler}>\n    <div>\n      name:\n      {' '}\n      <input value={inputControlState[0]} onChange={changeHandler[0]} />\n    </div>\n    <div>\n      number:\n      {' '}\n      <input value={inputControlState[1]} onChange={changeHandler[1]} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nconst People = ({ people, peopleState, handleDeleteContact }) => {\n  // Filters out contacts based on the user input controlled by newFilter state\n  const peopleToShow = people.filter((person) => (\n    person.name.toLowerCase().includes(peopleState.toLowerCase())));\n\n  return (\n    <ul>\n      {peopleToShow.map((person) => (\n        <li key={person.id}>\n          {person.name}\n          {' '}\n          {person.number}\n          {' '}\n          <DeleteContact\n            id={person.id}\n            handleDeleteContact={handleDeleteContact}\n            contactName={person.name}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst DeleteContact = ({ id, handleDeleteContact, contactName }) => (\n  <button type=\"button\" onClick={() => handleDeleteContact(id, contactName)}>delete</button>\n);\n\nconst App = () => {\n  const [people, setPeople] = useState([]);\n\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState(null);\n\n  useEffect(() => {\n    peopleService.getAll().then((initialPeople) => {\n      setPeople(initialPeople);\n    });\n  }, []);\n\n  // console.log('render', people.length, 'people')\n\n  const addContact = (e) => {\n    e.preventDefault();\n    const existingPerson = people.find(\n      (o) => o.name === newName && o.number === newNumber,\n    );\n    const sameNamePerson = people.find((o) => o.name === newName);\n\n    if (existingPerson) {\n      // eslint-disable-next-line no-undef\n      alert(`${newName} is already added to phonebook`);\n    } else if (sameNamePerson) {\n      if (\n        // eslint-disable-next-line no-undef\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`,\n        )\n      ) {\n        const updatedPerson = { ...sameNamePerson, number: newNumber };\n        peopleService\n          .update(updatedPerson.id, updatedPerson)\n          .then((response) => {\n            console.log('axios response:', response.data);\n            // Update the state to show the updated contact details on the frontend.\n            // If person id from state matches updated contact id, use the data from backend instead\n            // of the person state from frontend\n            setPeople(\n              people.map((person) => (person.id !== updatedPerson.id ? person : response.data)),\n            );\n            setNotificationType('success');\n\n            setNotificationMessage(\n              `${updatedPerson.name}'s details have been successfully updated.`,\n            );\n            setTimeout(() => {\n              setNotificationMessage(null);\n              setNotificationType(null);\n            }, 5000);\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch((error) => {\n            setNotificationType('error');\n            setNotificationMessage(\n              `Error ${error.response.status}: ${error.response.data.error}`,\n            );\n            setTimeout(() => {\n              setNotificationMessage(null);\n              setNotificationType(null);\n            }, 5000);\n            // To handle an edge case where there is an attempt to update the\n            // contact but the contact is deleted before the put request could be sent.\n            if (error.response.status === 404) {\n              setPeople(people.filter((person) => person.id !== updatedPerson.id));\n            }\n          });\n      }\n    } else {\n      const contactObject = {\n        name: newName,\n        number: newNumber,\n        date: new Date().toISOString(),\n      };\n\n      peopleService.create(contactObject)\n        .then((returnedContact) => {\n          setPeople(people.concat(returnedContact));\n          setNewName('');\n          setNewNumber('');\n\n          setNotificationMessage(\n            `${contactObject.name} has been successfully added to the phonebook.`,\n          );\n          setNotificationType('success');\n          setTimeout(() => {\n            setNotificationMessage(null);\n            setNotificationType(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setNotificationMessage(\n            error.response.data.error,\n          );\n          setNotificationType('error');\n          setTimeout(() => {\n            setNotificationMessage(null);\n            setNotificationType(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumChange = (e) => {\n    // console.log(newNumber);\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilter = (e) => {\n    setNewFilter(e.target.value);\n  };\n\n  const handleDeleteContact = (id, contactName) => {\n    // eslint-disable-next-line no-undef\n    if (window.confirm(`Delete ${contactName}?`)) {\n      peopleService.deleteContact(id);\n      // Update the state to filter out the deleted contact from the Frontend\n      setPeople(people.filter((person) => person.id !== id));\n    }\n  };\n\n  return (\n    <div>\n      <Notification message={notificationMessage} notificationType={notificationType} />\n      <h2>Phonebook</h2>\n      <Filter inputControlState={newFilter} changeHandler={handleFilter} />\n\n      <h2>add a new</h2>\n      <PersonForm\n        submitHandler={addContact}\n        inputControlState={[newName, newNumber]}\n        changeHandler={[handleNameChange, handleNumChange]}\n      />\n\n      <h2>Numbers</h2>\n      <People\n        people={people}\n        peopleState={newFilter}\n        handleDeleteContact={handleDeleteContact}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","/* eslint-disable react/jsx-filename-extension */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  // eslint-disable-next-line no-undef\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}